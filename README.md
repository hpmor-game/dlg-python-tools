# dlg-python-tools
–ù–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç –Ω–∞ Python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∏–∞–ª–æ–≥–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- `python`
- `rich`
## –°–ø–∏—Å–æ–∫ —É—Ç–∏–ª–∏—Ç
- `parser.py`
–†–µ–∞–ª–∏–∑—É–µ—Ç –∫–ª–∞—Å—Å `Parser` —Å –º–µ—Ç–æ–¥–æ–º `parse()`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç `.dlg`-—Ñ–∞–π–ª –≤ —Å–ª–æ–≤–∞—Ä—å

  **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from parser import Parser

parser = Parser()
dialogue = parser.parse("dialogues/alice_bob_calse.dlg")

print("–í —ç—Ç–æ–º –¥–∏–∞–ª–æ–≥–µ", len(dialogue["marks"]), "–±—Ä–∞–Ω—á–µ–π")
```

- `printer.py`
–ü–µ—á–∞—Ç–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –∏–∑ `.dlg`-—Ñ–∞–π–ª–∞ –≤ –∫–æ–Ω—Å–æ–ª—å —Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º

  **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
$ python printer.py dialogues/alice_bob_case.dlg
–ê–ª–∏—Å–∞, –∑–µ–≤–∞—è, –∑–∞—Ö–æ–¥–∏—Ç –≤ –∫–æ–º–Ω–∞—Ç—É –ë–æ–±–∞

ü•± –ê–ª–∏—Å–∞
–ü—Ä–∏–≤–µ—Ç, –ë–æ–±!

üòÄ –ê–ª–∏—Å–∞
–°–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–π —Ö–æ—Ä–æ—à–∏–π –¥–µ–Ω—å!
–° —Å–∞–º–æ–≥–æ —É—Ç—Ä–∞ —è —á—É–≤—Å—Ç–≤—É—é –≤–æ–æ–¥—É—à–µ–Ω–∏–µ –∏
—Ä–∞–¥–æ—Å—Ç—å!
...
```

- `player.py`
–ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –≤ –∫–æ–Ω—Å–æ–ª–∏

- `dlg2json.py`
–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `.dlg` –≤ `.json`

  **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
$ python dlg2json.py dialogues/alice_bob_case.dlg test.json
File has been saved as test.json
```

- `dlg2ron.py`
–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `.dlg` –≤ `.ron`

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- `characters.csv` —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞—Ö –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è (alias,name,color)
- `dialogues` ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å `.dlg`-—Ñ–∞–π–ª–∞–º–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞


## –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
–ü–∞—Ä—Å–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `.dlg` –∏–∑ [hpmor#8](https://github.com/hpmor-game/hpmor/issues/8). –¢–∞–∫–∂–µ –≤ –≤—ã–≤–æ–¥–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è BBCode.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å
–î–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ø–µ—Ü—Å—Ç–º–≤–æ–ª—ã –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏.
- `@` ‚Äî –æ–±—å—è–≤–ª–µ–Ω–∏–µ –≥–æ–≤–æ—Ä—è—â–µ–≥–æ

  **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```js
@alias:emotion //–ù–∞—á–∞–ª–æ —Ä–µ–ø–ª–∏–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ alias —Å —ç–º–æ—Ü–∏–µ–π
```
- `:` ‚Äî –Ω–∞—á–∞–ª–æ –∫–æ–º–∞–Ω–¥—ã
  - `:menu` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –º–µ–Ω—é –∏–∑ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–∞–Ω–¥ `opt`
  - `:opt(#mark)` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –æ–ø—Ü–∏—é, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â—É—é –≤ –±—Ä–∞–Ω—á `#mark`

- `#` ‚Äî –Ω–∞—á–∞–ª–æ –±—Ä–∞–Ω—á–∞

–¢–∞–∫–∂–µ `//` –¥–µ–ª–∞–µ—Ç –≤–µ—Å—å –ø–æ—Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –≤ —Å—Ç—Ä–æ–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º

### BBCode

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `printer.py` –∏ `player.py` –¥–æ—Å—Ç—É–ø–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ BBCode, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤ –º–æ–¥—É–ª—å `rich`. –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–≥–∏:

- ``b`` –∂–∏—Ä–Ω—ã–π
- ``i`` –∫—É—Ä—Å–∏–≤
- ``r`` –∏–Ω–≤–µ—Ä—Å–∏—è —Å —Ñ–æ–Ω–æ–º
- ``s`` –∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π
- ``u`` –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–π
- ``#``-–∫–æ–¥ –∏–ª–∏ –∏–º—è –∏–∑ [—ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞](https://rich.readthedocs.io/en/stable/appendix/colors.html?highlight=color) –∏–∑–º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bf
–°–º–æ—Ç—Ä–∏, —è –≥–æ–≤–æ—Ä—é [b]–∂–∏—Ä–Ω—ã–º[/b], [i]–∫—É—Ä—Å–∏–≤–æ–º[/i], [s]–∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–º[/s], [u]–ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–º[/u]
```
